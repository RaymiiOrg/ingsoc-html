
    <!DOCTYPE html>
    <html lang="en">
        <head>
        <title>Site updates, raymii.org now also available on Gopher - Raymii.org</title>
        <!-- <link href="/s/inc/css/custom-first.css" rel="stylesheet" />-->
        <link href="/s/inc/css/marx.css" rel="stylesheet"  />
        <!-- <link href="/s/inc/css/custom.css" rel="stylesheet" title="custom" />-->
        <script src="/s//inc/js/instant.js" type="text/javascript"></script> 
        <script src="/s//inc/js/toc.js" type="text/javascript"></script> 
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link type="application/opensearchdescription+xml" rel="search" href="/s/inc/opensearch.xml"/>
        <link rel="alternate" type="application/rss+xml" title="RSS Feed for Raymii.org" href="https://raymii.org/s/feed.xml" />
    </head>
    <body>
        
        <a id="top-of-page"></a>
        <main>
        <a class="skip-main" href="#main">Skip to main content</a>
            <header>
                <h1 class="headheader">
                    <a href="https://raymii.org/s/">Raymii.org <img src="/s/inc/img/resistor-50.png"></a>
                </h1>
                <small>
                  Quis custodiet ipsos custodes?<br>
                  <a href="/s/">Home</a> | 
                  <a href="/s/static/About.html">About</a> | 
                  <a href="/s/tags/all.html">All pages</a> | 
                  <a href="https://raymii.org/s/feed.xml">RSS Feed</a> | 
                  <a href="gopher://raymii.org:70">Gopher</a>
                </small>
            </header>
          

    <h2 class='headheader' id='main'>Site updates, raymii.org now also available on Gopher</h2><p><small>Published: 10-03-2019 | Author: Remy van Elst | <a href="Site_updates_raymii.org_now_on_gopher.txt" class="link">Text only version of this article</small></a></p><div class='ad'>
                            <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
                            <!-- voorartikel -->
                            <ins class="adsbygoogle"
                                 style="display:inline-block;width:728px;height:90px"
                                 data-ad-client="ca-pub-7993642564731324"
                                 data-ad-slot="6172324376"></ins>
                            <script>
                            (adsbygoogle = window.adsbygoogle || []).push({});
                            </script>
                        </div><br><div id="toc"><h3>Table of Contents</h3></div><hr><div id="contents"><h3>Introduction to Gopher</h3>

<p>I&#39;ve made some new improvements to this website. Raymii.org is generated using
my self-written static site generator named ingsoc and it now supports Gopher.
You can browse to <a href="gopher://raymii.org:70/">gopher://raymii.org:70</a> using your favorite gopher browser
(<code>lynx</code> or <a href="https://play.google.com/store/apps/details?id=com.afewroosloose.gopher&amp;hl=en_US">DiggieDog for Android</a>) to view all the articles here on
gopherspace. If you don&#39;t have a gopher browser, you can use <a href="https://gopher.floodgap.com/gopher/gw?a=gopher%3A%2F%2Fraymii.org%3A70%2F">the floodgap http
to gopher proxy</a></p>

<p>Gopher is a protocol for information transfer over the internet that was very
popular before HTTP took over as the dominant protocol, but there is still a
community of gopher users that prefer the simplicity of the protocol over the
more complex and large protocols more often encountered. Note that not all
browsers support gopher, or have incomplete support. If you want to know more
about Gopher, <a href="http://web.archive.org/web/20190310082022/https://prgmr.com/blog/gopher/2018/08/23/gopher.html">read this article</a>. The reason for me to add Gopher support
for my site is just that I like tinkering and text-based simple stuff. Gopher
fits that bill.</p>

<p><img src="https://raymii.org/s/inc/img/gopher.png" alt=""></p>

<h3>Static site generator</h3>

<p>Due to <a href="https://prgmr.com/blog/gopher/2018/11/09/setting-up-gopherserver.html">this excellent guide</a> on <code>pygopherd</code> and how to create a <code>Gophermap</code>
(sort of <code>index.html</code> file) I was able to get up and running quickly. I made an
Ansible playbook to install and configure <code>Pygopherd</code> and updated my static site
generator to <a href="https://github.com/RaymiiOrg/raymiiorg.github.io/tree/master/gopher/gophermap">generate the gophermap</a></p>

<p>If you want to setup a gopher server, it can be as simple as:</p>

<pre><code>apt-get install pygopherd
</code></pre>

<p>Afterwards, edit the file <code>/var/gopher/gophermap</code>. Or remove it and place files
in <code>/var/gopher</code>.</p>

<p>My static site generator&#39;s gopher part is simple. It takes the Markdown files,
uses the header for meta information like title and date and puts that meta
information in a dict. Using a <code>lambda</code> and an <code>OrderedDict</code> the items are
stored in another list, sorted by date:</p>

<pre><code>gopherItems = collections.OrderedDict(sorted(parsedFiles.items(), reverse=True, key=lambda item: dateutil.parser.parse(item[1][&#39;date&#39;], dayfirst=True)))
</code></pre>

<p>The metadata looks like this:</p>

<pre><code>title: &quot;Site updates, raymii.org now also available on Gopher&quot;
author: &quot;Remy van Elst&quot;
category: &quot;blog&quot;
date: &quot;10-03-2019&quot;
</code></pre>

<p>Then, using a <code>for</code> loop, every item is written to the <code>gophermap</code> file:</p>

<pre><code>with open(&#39;gophermap&#39;, &#39;w&#39;) as gopherMapFile:
    for filename, values in gopherItems.items():
        itemLine  = &quot;0&quot; + str(values[&#39;title&#39;]) + &quot; (&quot; + str(values[&#39;date&#39;]) + &quot;)\t&quot;
        itemLine += str(filename) + &quot;.txt\traymii.org\t70\n&quot;
        gopherMapFile.write(itemLine)
    gopherMapFile.write(&quot;1This server runs on Pygopherd\t/devel/gopher/pygopherd\tgopher.quux.org\t70\n&quot;)
    gopherMapFile.close()
</code></pre>

<p>Not the most elegant Python, if I would write the generator from scratch today
I&#39;d probably use templates (<code>jinja2</code>), but this works fine for now.</p>

<p>There is a Gopher only RSS feed, which uses the regular RSS feed generator code
and a gopher links section, which is a seperate <code>gophermap</code> in the <code>links</code>
folder. It&#39;s filled via the config file of the static site generator:</p>

<pre><code>gopherlinks: [
  {&#39;host&#39;: &#39;serf.jpmens.net&#39;,     
   &#39;path&#39;: &#39;/&#39;, 
   &#39;port&#39;: 70, 
   &#39;gophertype&#39;: 1, 
   &#39;label&#39;: &quot;Jan Piet Mens&#39; gopherspace&quot;
  }
]
</code></pre>

<p>After all the files have been created, the generator does a <code>git commit</code> and a
<code>git push</code>. The servers all poll the repository and if there are changes, they
<code>pull</code> the new site. Hassle free deployment. After all, it&#39;s just static HTML.</p>

<p>Images and links are not handled yet. You basically get the Markdown I write on
which this site is generated. Just as the plain text file link you can click at
every article.</p>

<p>If you use the gopher version of Raymii.org, <a href="https://raymii.org/s/static/About.html">please let me know</a>.</p>

<p><a href="https://raymii.org/s/blog/Site_Improvements_for_accessibility.html">Last year I did some site updates focussed on accessibility</a>.</p>

<p><a href="https://www.digitalocean.com/?refcode=7435ae6b8212">If you like this article, consider sponsoring me by trying out a Digital Ocean
VPS. With this link you&#39;ll get $100 credit for 60 days). (referral link)</a></p>
Tags: <a href="../tags/blog.html" class="link">blog</a>, <a href="../tags/cli.html" class="link">cli</a>, <a href="../tags/gopher.html" class="link">gopher</a>, <a href="../tags/ingsoc.html" class="link">ingsoc</a>, <a href="../tags/lynx.html" class="link">lynx</a>, <a href="../tags/python.html" class="link">python</a>, <a href="../tags/raymiiorg.html" class="link">raymiiorg</a>, <a href="../tags/server.html" class="link">server</a>, <a href="../tags/site.html" class="link">site</a>, <a href="../tags/w3c.html" class="link">w3c</a></div><br/><footer><br/>
                <form role="search" action="https://encrypted.google.com/search"
                style="min-width:250px;max-width:300px;">
                    <div class="form-group">
                      <input type="hidden" name="as_sitesearch" value="raymii.org">
                      <input type="hidden" name="as_qdr" value="all">
                      <input type="text" name="as_q" class="form-control" placeholder="Search">
                    </div>
                  </form>
                <br>
                <p>
                <a href="/s/">Home</a> | 
                <a href="/s/static/About.html">About</a> | 
                <a href="/s/tags/all.html">All pages</a> | 
                <a href="/s/software/Sparkling_Network.html">Cluster Status</a> | 
                Generated by <a href="/s/software/ingsoc.html">ingsoc</a> | 
            
    </footer>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-3704876-6"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-3704876-6');
    </script>
     
    </body>
    </html>
    