
    <!DOCTYPE html>
    <html lang="en">
        <head>
        <title>Find all services using libssl to restart after an OpenSSL update - Raymii.org</title>
        <link href="/s/inc/css/marx.css" rel="stylesheet"  />
        <script src="/s//inc/js/instant.js"></script> 
        <script src="/s//inc/js/toc.js"></script> 
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link type="application/opensearchdescription+xml" rel="search" href="/s/inc/opensearch.xml"/>
        <link rel="alternate" type="application/rss+xml" title="RSS Feed for Raymii.org" href="https://raymii.org/s/feed.xml" />
    </head>
    <body>
        
        <a id="top-of-page"></a>
        <main>
        <a class="skip-main" href="#main">Skip to main content</a>
            <header>
                <h1 class="headheader">
                    <a href="https://raymii.org/s/">Raymii.org 
                        <img src="/s/inc/img/resistor-50.png" alt="Logo (IEC resistor symbol)">
                    </a>
                </h1>
                <small>
                  Quis custodiet ipsos custodes?<br>
                  <a href="/s/">Home</a> | 
                  <a href="/s/static/About.html">About</a> | 
                  <a href="/s/tags/all.html">All pages</a> | 
                  <a href="https://raymii.org/s/feed.xml">RSS Feed</a> | 
                  <a href="gopher://raymii.org:70">Gopher</a>
                </small>
            </header>
          
    <h2 class='headheader' id='main'>Find all services using libssl to restart after an OpenSSL update</h2>
<p><small>Published: 14-07-2015 | Author: Remy van Elst | <a href="Find_all_services_using_libssl_to_restart_after_an_OpenSSL_update.txt">Text only version of this article</a>
</small></p>
<div class='ad'>
                            <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
                            <!-- voorartikel -->
                            <ins class="adsbygoogle"
                                 style="display:inline-block;width:728px;height:90px"
                                 data-ad-client="ca-pub-7993642564731324"
                                 data-ad-slot="6172324376"></ins>
                            <script>
                            (adsbygoogle = window.adsbygoogle || []).push({});
                            </script>
                        </div><br><div id="toc">
<h3>Table of Contents</h3>
</div>
<hr>
<div id="contents">
<p><img src="https://raymii.org/s/inc/img/OpenSSL_logo_small.png" alt="Openssl"></p>

<p>When you update OpenSSL, the software that currently has the ssl libraries
loaded in memory do not automatically load the updated libraries. A full system
reboot resolves that problem, but sometimes that is not possible. This command
shows you all the software that has loaded the libraries, allowing you to
restart only those services. If you don&#39;t restart or reload after an update, the
software might still be vulnerable to issues that the update fixed.</p>

<p><a href="https://www.digitalocean.com/?refcode=7435ae6b8212">If you like this article, consider sponsoring me by trying out a Digital Ocean
VPS. With this link you&#39;ll get $100 credit for 60 days). (referral link)</a></p>

<p>Make sure you have the <code>lsof</code> command installed. Your package manager probably
has this package.</p>

<p>Using the following command you get a list of services currently using libssl:</p>

<pre><code>lsof | grep libssl | awk &#39;{print $1}&#39; | sort | uniq
</code></pre>

<p>On a Directadmin shared hosting server this is the output:</p>

<pre><code>directadm
exim
httpd
imap-logi
managesie
nrpe
php
pop3-logi
pure-ftpd
spamd
</code></pre>

<p>Not all the filenames are complete but you can fill those in. If you leave out
the last part of the command you can also see which specific library is in use:</p>

<pre><code>lsof | grep libssl
</code></pre>

<p>Example output:</p>

<pre><code>imap-logi   449   dovecot  mem       REG              202,1    539869      85375 /usr/lib64/libssl.so.1.0.0
httpd       876    apache  mem       REG              202,1    539869      85375 /usr/lib64/libssl.so.1.0.0  
[...]
spamd     13513      root  mem       REG              202,1    444168      85398 /usr/lib64/libssl.so.1.0.1e
</code></pre>

<p>Here you can see some services using a different library, those still need a
restart.</p>

<p><em>Update</em>. Tzu sent me an email with his command to find all updated libraries
and services using the old ones:</p>

<pre><code>lsof | grep &#39;DEL.*lib&#39; | cut -f 1 -d &#39; &#39; | sort -u
</code></pre>
Tags: <a href="../tags/centos.html">centos</a>
, <a href="../tags/certificates.html">certificates</a>
, <a href="../tags/libssl.html">libssl</a>
, <a href="../tags/lsof.html">lsof</a>
, <a href="../tags/openssl.html">openssl</a>
, <a href="../tags/pki.html">pki</a>
, <a href="../tags/snippets.html">snippets</a>
, <a href="../tags/ssl.html">ssl</a>
, <a href="../tags/ubuntu.html">ubuntu</a>
</div>
<br/>
<footer>
<br/>
                <form role="search" action="https://encrypted.google.com/search"
                style="min-width:250px;max-width:300px;">
                    <div class="form-group">
                      <input type="hidden" name="as_sitesearch" value="raymii.org">
                      <input type="hidden" name="as_qdr" value="all">
                      <input type="text" name="as_q" class="form-control" placeholder="Search">
                    </div>
                  </form>
                <br>
                <p><small>
                <a href="/s/">Home</a> | 
                <a href="/s/static/About.html">About</a> | 
                <a href="/s/tags/all.html">All pages</a> | 
                <a href="/s/software/Sparkling_Network.html">Cluster Status</a> | 
                Generated by <a href="/s/software/ingsoc.html">ingsoc</a>.</small></p>
    
    </footer>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-3704876-6"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-3704876-6');
    </script>
     
    </main>
    </body>
    </html>
    