
    <!DOCTYPE html>
    <html lang="en">
        <head>
        <title>Word occurrence counter and analyzer - Raymii.org</title>
        <link href="/s/inc/css/marx.css" rel="stylesheet"  />
        <script src="/s//inc/js/instant.js"></script> 
        <script src="/s//inc/js/toc.js"></script> 
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link type="application/opensearchdescription+xml" rel="search" href="/s/inc/opensearch.xml"/>
        <link rel="alternate" type="application/rss+xml" title="RSS Feed for Raymii.org" href="https://raymii.org/s/feed.xml" />
    </head>
    <body>
        
        <a id="top-of-page"></a>
        <main>
        <a class="skip-main" href="#main">Skip to main content</a>
            <header>
                <h1 class="headheader">
                    <a href="https://raymii.org/s/">Raymii.org 
                        <img src="/s/inc/img/resistor-50.png" alt="Logo (IEC resistor symbol)">
                    </a>
                </h1>
                <small>
                  Quis custodiet ipsos custodes?<br>
                  <a href="/s/">Home</a> | 
                  <a href="/s/static/About.html">About</a> | 
                  <a href="/s/tags/all.html">All pages</a> | 
                  <a href="https://raymii.org/s/feed.xml">RSS Feed</a> | 
                  <a href="gopher://raymii.org:70">Gopher</a>
                </small>
            </header>
          
    <h2 class='headheader' id='main'>Word occurrence counter and analyzer</h2>
<p><small>Published: 07-03-2013 | Author: Remy van Elst | <a href="Word_occurrence_counter_and_analyzer.txt">Text only version of this article</a>
</small></p>
<div class='ad'>
                            <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
                            <!-- voorartikel -->
                            <ins class="adsbygoogle"
                                 style="display:inline-block;width:728px;height:90px"
                                 data-ad-client="ca-pub-7993642564731324"
                                 data-ad-slot="6172324376"></ins>
                            <script>
                            (adsbygoogle = window.adsbygoogle || []).push({});
                            </script>
                        </div><br><div id="toc">
<h3>Table of Contents</h3>
</div>
<hr>
<div id="contents">
<p>With these commands you can analyze a text file. It will count all the
occurrences of all words and put out the stats. It is usefull for song lyrics,
books, notes and everything. It helps me analyze my writing style, which words
do I use more often, where are my spelling errors and such. It is also nice to
win an argument against someone over a dragonforce song. This example will use
lyrics as example, but it is applicable to all text files.</p>

<p><a href="https://www.digitalocean.com/?refcode=7435ae6b8212">If you like this article, consider sponsoring me by trying out a Digital Ocean
VPS. With this link you&#39;ll get $100 credit for 60 days). (referral link)</a></p>

<h5>Get the Lyrics (text)</h5>

<p>First get the lyrics, or the text you want to analyze into a text file. I&#39;ve
heard nano, vi(m) and emacs are quite good with text. In this song I will use a
song by Dragonforce. It does not matter which one because they&#39;re all full of
the same words.</p>

<p>My lyrics file is named: <code>df1.txt</code></p>

<h5>Sanitize them</h5>

<p>The tools we are going to use do not like all those comma&#39;s, colons, exclamation
marks and weird non-alphanumeric characters. So sanitize the file like this:</p>

<pre><code>cat df1.txt | tr -cd &#39;[:alnum:] [:space:]&#39; &gt; df1san.txt
</code></pre>

<p>What this does is pump the file through the tr command, that command (with these
arguments) strips everything which is not a-zA-Z0-9 or a space. Exactly what we
want.</p>

<h5>Analyze it Now we do the magic:</h5>

<pre><code>sed &#39;s/\.//g;s/\(.*\)/\L\1/;s/\ /\n/g&#39; dfsan.txt | sort | uniq -c | sort -nr | head -n 20



remy@vps8:~$ sed &#39;s/\.//g;s/\(.*\)/\L\1/;s/\ /\n/g&#39; dfsan.txt | sort | uniq -c | sort -nr | head -n 20
72 the
32 
25 and
22 of
20 in
17 we
16 on
14 our
13 a
8 were
8 lost
8 for
7 will
7 still
7 light
6 to
6 so
6 fire
6 far
5 through
</code></pre>

<h3>Other Example</h3>

<h4>on my class notes about blood and the immune system</h4>

<pre><code>remy@vps8:~$ cat afweer.txt | tr -cd &#39;[:alnum:] [:space:]&#39; &gt; afweersan.txt      
remy@vps8:~$ sed &#39;s/\.//g;s/\(.*\)/\L\1/;s/\ /\n/g&#39; afweersan.txt | sort | uniq -c | sort -nr | head -n 20                 
195 
108 de
80 een
72 van
65 het
51 in
46 is
40 en
24 zijn
24 op
24 afweer
22 die
20 vraag
20 deze
19 worden
18 kan
17 bij
16 dit
15 er
14 of
</code></pre>

<p>After stripping it of the non-usefull words:</p>

<pre><code>remy@vps8:~$ cat afwres.txt | head -n 10
24 afweer
14 cellen
11 bacterin
9 waar
9 reactie
9 antigeen
8 specifieke
7 milieu
7 lymfocyten
7 lichaam
</code></pre>

<h4>Fabian Scherschels NanoWriMo 2011 Book: Nightwatch</h4>

<p><a href="https://gitorious.org/nano2011">GIT tree of the book</a> &amp; <a href="http://www.nanowrimo.org/en/participants/fabsh">NaNoWiMo page</a> Book is <code>Creative Commons
Attribution-NonCommercial-ShareAlike 3.0 Unported License</code></p>

<pre><code>1020 the
454 he
421 and
418 of
357 to
347 had
297 a
267 was
257 his
241 that
216 in
132 it
130 marc
112 him
108 as
105 this
105 they
93 with
90 but
82 were
82 from
82 been
82 at
74 on
70 would
68 for
68 could
56 their
56 be
53 out
51 into
50 man
49 all
48 there
48 so
48 by
47 looked
46 not
44 up
44 them
44 like
</code></pre>

<h4>Analyzing IP and log files</h4>

<p>Today I found another usefull use for this command. Analyzing IP adresses. First
I grepped my entire lighttpd log file:</p>

<p>cat access.log | egrep -o
&#39;[[:digit:]]{1,3}.[[:digit:]]{1,3}.[[:digit:]]{1,3}.[[:digit:]]{1,3}&#39; | tr
[:space:] &#39;\n&#39; | grep -v &quot;^\s*$&quot; | sort | uniq -c | sort -bnr</p>

<p>(egrep -o spits out only the IP adress, not the whole line on which the IP
adress is on)</p>

<p>That gives out this nice list (this list is made up, not real IP adresses):</p>

<pre><code>2 83.64.150.248
2 94.0.74.75
2 94.142.55.252
2 95.237.133.3
2 98.225.130.26
3 108.100.28.45
3 213.93.70.87
5 81.30.145.69
348 66.228.43.247
467 173.255.236.50
</code></pre>

<p><a href="http://unix.stackexchange.com/questions/39039/get-text-file-word-occurrence-count-of-all-words-print-output-sorted">Thanks to the wonderfull community at stackexchange</a></p>
Tags: <a href="../tags/articles.html">articles</a>
, <a href="../tags/awk.html">awk</a>
, <a href="../tags/bash.html">bash</a>
, <a href="../tags/log.html">log</a>
, <a href="../tags/lyrics.html">lyrics</a>
, <a href="../tags/notes.html">notes</a>
, <a href="../tags/sed.html">sed</a>
, <a href="../tags/tr.html">tr</a>
, <a href="../tags/word.html">word</a>
</div>
<br/>
<footer>
<br/>
                <form role="search" action="https://encrypted.google.com/search"
                style="min-width:250px;max-width:300px;">
                    <div class="form-group">
                      <input type="hidden" name="as_sitesearch" value="raymii.org">
                      <input type="hidden" name="as_qdr" value="all">
                      <input type="text" name="as_q" class="form-control" placeholder="Search">
                    </div>
                  </form>
                <br>
                <p><small>
                <a href="/s/">Home</a> | 
                <a href="/s/static/About.html">About</a> | 
                <a href="/s/tags/all.html">All pages</a> | 
                <a href="/s/software/Sparkling_Network.html">Cluster Status</a> | 
                Generated by <a href="/s/software/ingsoc.html">ingsoc</a>.</small></p>
    
    </footer>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-3704876-6"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-3704876-6');
    </script>
     
    </main>
    </body>
    </html>
    