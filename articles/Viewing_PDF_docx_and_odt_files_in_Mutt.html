
    <!DOCTYPE html>
    <html lang="en">
        <head>
        <title>Viewing PDF, .docx and .odt files in mutt (as text) - Raymii.org</title>
        <link href="/s/inc/css/custom-first.css" rel="stylesheet" />
        <!-- <link href="/s/inc/css/light.css" rel="stylesheet"  />
        # <link href="/s/inc/css/custom.css" rel="stylesheet" title="custom" />-->
        <script src="/s//inc/js/instant.js" type="text/javascript"></script> 
        <script src="/s//inc/js/toc.js" type="text/javascript"></script> 
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
        <link href="inc/img/icons/iphone.png" rel="apple-touch-icon" />
        <link href="inc/img/icons/ipad.png" rel="apple-touch-icon" sizes="76x76" />
        <link href="inc/img/icons/iphone-retina.png" rel="apple-touch-icon" sizes="120x120" />
        <link href="inc/img/icons/ipad-retina.png" rel="apple-touch-icon" sizes="152x152" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link type="application/opensearchdescription+xml" rel="search" href="/s/inc/opensearch.xml"/>
        <link rel="alternate" type="application/rss+xml" title="RSS Feed for Raymii.org" href="https://raymii.org/s/feed.xml" />
    </head>
    <body>
        <a class="skip-main" href="#main">Skip to main content</a>
        <a id="top-of-page"></a>
        <div class="container-fluid ">
            <div class="row">
                <div class="col-md-12">
                    <div class="col-md-3 col-sm-3 max-200">
                        <div class="well well-none"> 
                            <h3 class="headheader"><a href="https://raymii.org/s/">Raymii.org <img src="/s/inc/img/resistor-50.png"></a></h3>
                            <h6 class="headheader">Quis custodiet ipsos custodes?</h6>
                            <h6><a href="https://raymii.org/s/feed.xml">RSS Feed</a></h6>
                        </div>
          

    
    <form role="search" action="https://encrypted.google.com/search">
        <div class="form-group">
          <input type="hidden" name="as_sitesearch" value="raymii.org">
          <input type="hidden" name="as_qdr" value="all">
          <input type="text" name="as_q" class="form-control" placeholder="Search">
        </div>
      </form>
      <div class="menu"><ul class="nav nav-pills nav-stacked"><li><a href="/s/index.html" class="special-menu">Home</a></li><li class='bottom-spacing'><a href="/s/tags/all.html" class="special-menu">All Pages</a></li><li class='hideifsmall'><a href="/s/tags/articles.html" class="link">Articles</a></li>
<li class='hideifsmall'><a href="/s/tags/blog.html" class="link">Blog</a></li>
<li class='hideifsmall'><a href="/s/tags/tutorials.html" class="link">Tutorials</a></li>
<li class='hideifsmall'><a href="/s/tags/ansible.html" class="link">Ansible</a></li><li class='hideifsmall'><a href="/s/tags/openstack.html" class="link">Openstack</a></li><li class='hideifsmall'><a href="/s/tags/bash.html" class="link">Bash</a></li><li class='hideifsmall'><a href="/s/tags/ssl.html" class="link">SSL</a></li><li class='hideifsmall'><a href="/s/tags/monitoring.html" class="link">Monitoring</a></li><li class='hideifsmall'><a href="/s/tags/ubuntu.html" class="link">Ubuntu</a></li><li class='hideifsmall'><a href="/s/tags/openvms.html" class="link">OpenVMS</a></li></ul>            
               <!-- advertisement start -->
                <a href="https://www.digitalocean.com/?refcode=7435ae6b8212"><img src="https://raymii.org/s/inc/img/banner_trans.png"></a><br>
                <a href="http://clients.inceptionhosting.com/aff.php?aff=083">Inception Hosting Affiliate Link</a><br />
                <a href="https://www.digitalocean.com/?refcode=7435ae6b8212">Digital Ocean Affiliate Link, $10 free credit.</a><br />
                <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
                <!-- Raymii-2 -->
                <ins class="adsbygoogle"
                     style="display:inline-block;width:200px;height:200px"
                     data-ad-client="ca-pub-7993642564731324"
                     data-ad-slot="9322003332"></ins>
                <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
                </script>
                <!-- advertisement end -->
                </div>
           </div>  
           <div class="col-md-8 col-sm-8"> 
                <div class="inner">
                <div id="main"></div>

           <h2 class='headheader' id='main'>Viewing PDF, .docx and .odt files in mutt (as text)</h2><ul class="breadcrumb"><li><a href="../index.html" class="link">Home</a></li><li><a href="../tags/articles.html" class="link">Articles</a></li><li><a href="Viewing_PDF_docx_and_odt_files_in_Mutt.html" class="link">Viewing PDF, .docx and .odt files in mutt (as text)</a></li></ul><p><small>03-03-2019</small> | <small>Remy van Elst</small> | <a href="Viewing_PDF_docx_and_odt_files_in_Mutt.txt" class="link">Text only version of this article</a></p><div class='ad'>
                            <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
                            <!-- voorartikel -->
                            <ins class="adsbygoogle"
                                 style="display:inline-block;width:728px;height:90px"
                                 data-ad-client="ca-pub-7993642564731324"
                                 data-ad-slot="6172324376"></ins>
                            <script>
                            (adsbygoogle = window.adsbygoogle || []).push({});
                            </script>
                        </div><br><div id="toc"><h3>Table of Contents</h3></div><hr><div id="contents"><p><img src="htttps://raymii.org/s/inc/img/mutt_djd.png"></p>

<p>mutt is my email client at work. I like the simple interface, the speed and the ability to customize the workflow. Email is synced with <code>offlineimap</code> and sent via <code>msmtp</code>, addresses are in <code>abook</code>, and <code>calcurse</code> is the calendar for meetings, no complicated setup there. One aspect I especially like is the ability to view attachments on the command line right from mutt itself. Some departments at work send emails with an attached <code>PDF</code> or <code>.docx</code> file that contains the actual message, instead of just putting the text in the email itself. Using <code>pandoc</code> and <code>pdftotext</code> in mutt, the text of the attachments is displayed as a regular mail, no interruptions in my workflow by opening an external program. This article explains how to set up your <code>.muttrc</code> and <code>.mailcap</code> to use <code>pandoc</code> and <code>pdftotext</code> to view attachments as text in mutt.</p>

<p>I do assume you have a working mutt set up as I don&#39;t cover that here. <a href="https://wiki.archlinux.org/index.php/mutt">The Arch Linux Wiki</a> on mutt is a great place to start if you haven&#39;t got mutt setup yet.</p>

<p><a href="https://www.digitalocean.com/?refcode=7435ae6b8212">If you like this article, consider sponsoring me by trying out a Digital Ocean VPS. With this link, you&#39;ll get a $5 VPS for 2 months free (as in, you get $10 credit). (referral link)</a></p>

<h3>Installing software</h3>

<p>On Ubuntu both packages required are in the repository and can be installed using apt:</p>

<pre><code>apt-get install pandoc poppler-utils
</code></pre>

<p><code>pdf2text</code> is in <code>poppler-utils</code>.</p>

<h3>.mailcap</h3>

<p>Your <code>.mailcap.</code> file contains information for a mail client how to handle non-text files.</p>

<p>In your <code>.muttrc</code> file you need to specify where this file is:</p>

<pre><code>set mailcap_path = ~/.mailcap
</code></pre>

<p>The man page for <code>.mailcap</code> explains the purpose and format of the file:</p>

<p>Each mailcap entry consists of a content-type specification, a command to execute, and (possibly) a set of optional &quot;flag&quot; values. For example, a straightforward mailcap entry (which is default behavior for metamail) would look like this:</p>

<pre><code>text/plain; cat %s
</code></pre>

<p>The optional flags can be used to specify additional information about the mail-handling command. For example:</p>

<pre><code>text/plain; cat %s; copiousoutput
</code></pre>

<p>can be used to indicate that the output of the &#39;cat&#39; command may be voluminous, requiring either a scrolling window, a pager, or some other appropriate coping mechanism.</p>

<h4>HTML mails</h4>

<p>I use <code>elinks</code> for example to view html mails, the following line accomplishes that:</p>

<pre><code>text/html; elinks -dump ; copiousoutput;
</code></pre>

<p>Combined with the following line in my <code>.muttrc</code> to auto convert HTML mails:</p>

<pre><code>auto_view text/html text/calendar application/ics
</code></pre>

<p>You only need <code>text/html</code>, but I also have calendar and meeting invites that I auto view due to Exchange presenting those in some weird empty email with attachment format.</p>

<p>Now, back to the PDF and .docx files.</p>

<h4>PDF &amp; .docx</h4>

<p>The following command will convert a .docx file to text. The to parameter states markdown, but the output will be plain text with markdown formatting.</p>

<pre><code>pandoc --from docx --to markdown My_doc_file.docx
</code></pre>

<p>This works for OpenOffice as well:</p>

<pre><code>pandoc --from odt --to markdown My_odt_file.odt
</code></pre>

<p>The following command will convert a .pdf file to text:</p>

<pre><code>pdftotext -layout %s
</code></pre>

<p>Do note that in both cases non-text items might be lost, like images. Not a big issue since my files are mostly plain text but do keep it in mind. Tables work quite well, which surprised me. You still can save the attachments and view them with another program (like LibreOffice).</p>

<p>Putting two and two together results in the following three lines in your <code>.mailcap</code> file:</p>

<pre><code>application/vnd.openxmlformats-officedocument.wordprocessingml.document; pandoc --from docx --to markdown %s; copiousoutput
application/vnd.oasis.opendocument.text; pandoc --from odt --to markdown %s; copiousoutput
application/pdf; pdftotext -layout %s -; copiousoutput;
</code></pre>

<p>Restart mutt and open an email with an attachment you want to view. Instead of using <code>s</code> to save the file you can now use <code>v</code> to view the file. Either <code>pdftotext</code> or <code>pandoc</code> is invoked, and the plain text output is shown inside mutt.</p>

<p><img src="htttps://raymii.org/s/inc/img/mutt_pdf.png"></p>

<blockquote>
<p>A PDF file viewed in mutt, as text</p>
</blockquote>
</div><hr>Tags: <a href="../tags/articles.html" class="link">articles &nbsp;</a><a href="../tags/bash.html" class="link">bash &nbsp;</a><a href="../tags/mail.html" class="link">mail &nbsp;</a><a href="../tags/markdown.html" class="link">markdown &nbsp;</a><a href="../tags/microsoft.html" class="link">microsoft &nbsp;</a><a href="../tags/mutt.html" class="link">mutt &nbsp;</a><a href="../tags/office.html" class="link">office &nbsp;</a><a href="../tags/pandoc.html" class="link">pandoc &nbsp;</a><a href="../tags/pdf.html" class="link">pdf &nbsp;</a><a href="../tags/pdf2text.html" class="link">pdf2text &nbsp;</a><a href="../tags/word.html" class="link">word &nbsp;</a><div class="footer">
                <hr>
                <p>Generated by <a href="/s/software/ingsoc.html">ingsoc</a> | 
                <a href="/s/software/Sparkling_Network.html">Cluster Status</a> | 
                <a href="/s/static/About.html">About</a><br />
                </div>
            </div>
        </div>
    </div>  
    </div>
    </div>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-3704876-6"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-3704876-6');
    </script>
     
    </body>
    </html>
    