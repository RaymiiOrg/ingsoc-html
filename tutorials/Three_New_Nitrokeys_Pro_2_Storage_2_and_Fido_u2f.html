
    <!DOCTYPE html>
    <html lang="en">
        <head>
        <title>Three new NitroKeys! Nitrokey Pro 2, Storage 2 and a FIDO-U2F Nitrokey - Raymii.org</title>
        <link href="/s/inc/css/marx.css" rel="stylesheet"  />
        <script src="/s//inc/js/instant.js"></script> 
        <script src="/s//inc/js/toc.js"></script> 
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link type="application/opensearchdescription+xml" rel="search" href="/s/inc/opensearch.xml"/>
        <link rel="alternate" type="application/rss+xml" title="RSS Feed for Raymii.org" href="https://raymii.org/s/feed.xml" />
    </head>
    <body>
        
        <a id="top-of-page"></a>
        <main>
        <a class="skip-main" href="#main">Skip to main content</a>
            <header>
                <h1 class="headheader">
                    <a href="https://raymii.org/s/">Raymii.org 
                        <img src="/s/inc/img/resistor-50.png" alt="Logo (IEC resistor symbol)">
                    </a>
                </h1>
                <small>
                  Quis custodiet ipsos custodes?<br>
                  <a href="/s/">Home</a> | 
                  <a href="/s/static/About.html">About</a> | 
                  <a href="/s/tags/all.html">All pages</a> | 
                  <a href="https://raymii.org/s/feed.xml">RSS Feed</a> | 
                  <a href="gopher://raymii.org:70">Gopher</a>
                </small>
            </header>
          
    <h2 class='headheader' id='main'>Three new NitroKeys! Nitrokey Pro 2, Storage 2 and a FIDO-U2F Nitrokey</h2>
<p><small>Published: 08-11-2018 | Author: Remy van Elst | <a href="Three_New_Nitrokeys_Pro_2_Storage_2_and_Fido_u2f.txt" class="link">Text only version of this article</small></a>
</p>
<div class='ad'>
                            <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
                            <!-- voorartikel -->
                            <ins class="adsbygoogle"
                                 style="display:inline-block;width:728px;height:90px"
                                 data-ad-client="ca-pub-7993642564731324"
                                 data-ad-slot="6172324376"></ins>
                            <script>
                            (adsbygoogle = window.adsbygoogle || []).push({});
                            </script>
                        </div><br><div id="toc">
<h3>Table of Contents</h3>
</div>
<hr>
<div id="contents">
<p><img src="https://raymii.org/s/inc/img/nitrokey-u2f.jpg" alt=""></p>

<p>Last week I received several newsletters from Nitrokey. As you might know, I&#39;m a fan of their (mostly open source) hardware security devices. I&#39;ve written articles on the <a href="https://raymii.org/s/articles/Get_Started_With_The_Nitrokey_HSM.html">NitroKey HSM</a> (even on <a href="https://raymii.org/s/articles/Decrypt_NitroKey_HSM_or_SmartCard-HSM_private_keys.html">extracting private key material</a>), on the <a href="https://raymii.org/s/articles/Nitrokey_Start_Getting_started_guide.html">NitroKey Start</a> and some <a href="https://raymii.org/s/tutorials/Nitrokey_gnuk_firmware_update_via_DFU.html">firmware</a> <a href="https://raymii.org/s/tutorials/FST-01_firmware_upgrade_via_usb.html">update</a> guides.</p>

<p>Their newsletters introduced two new keys, the Nitrokey Pro 2 and the Nitrokey
FIDO-U2F key. On their website I also saw the Nitrokey Storage Pro 2. This
article is a summary of the newsletters and goes over the new features in the
new hardware. It boils down to a new OpenPGP smartcard version (3.3, it was 2.1)
in the Nitrokey Pro 2 and Storage 2. The FIDO-U2F device is an entirely new
Nitrokey (with a button).</p>

<p><a href="https://www.digitalocean.com/?refcode=7435ae6b8212">If you like this article, consider sponsoring me by trying out a Digital Ocean
VPS. With this link you&#39;ll get $100 credit for 60 days). (referral link)</a></p>

<p>I recommend you get a Nitrokey. The <a href="https://github.com/Nitrokey">open hardware and mostly open software</a>
part is what I like the most, next to the pricing and their support. I&#39;ve been
in contact with the company a few times, both with the CEO Jan and a developer
Szczepan. That guy is active on the Gnuk mailing list and does, as far as I can
tell, most of their embedded development.</p>

<p>If you ask me if I prefer a Nitrokey over a yubikey, then I would choose the
Nitrokey. The yubikey is closed source all together, relying on their
infrastructure in the default (otp) mode. The nitrokey gives you more freedom.
The nitrokey is a full USB A plug as well, where as the yubikey is half, or in
the USB slot all together. So, the Nitrokey is more durable.</p>

<p>In the past I got hardware sponsored from Nitrokey. Not for this article.</p>

<h3>What are Nitrokeys?</h3>

<p>NitroKey creates hardware security tokens. The Nitrokey Pro is a OpenPGP
smartcard in a USB stick with a companion application. It allows you to securely
store your GPG key, among other things.</p>

<p>The Nitrokey HSM is a hardware security module. It is also a smartcard in a USB
key, but this time it utilizes different firmware to present itself as a
<a href="https://www.smartcard-hsm.com/">Smartcard-HSM</a>, using PKCS-11 (cryptoki) as the protocol.</p>

<p>The Nitrokey Start is a soft-token (meaning no smartcard). It uses the
<a href="http://www.fsij.org/doc-gnuk/">gnuk</a> firmware to also be a OpenPGP-token. That hardware and software is
fully open source, the Pro and HSM are up until the smartcard software.</p>

<p>The Nitrokey storage is a Nitrokey Pro with USB storage that is encrypted (by
the smartcard). I haven&#39;t used a Nitrokey Storage, so no experience with that.</p>

<h3>Nitrokey Pro 2</h3>

<p>The feature most exciting in this new hardware version is ECC support. Copying
from their newsletter, all the new features:</p>

<h4>Support of elliptic curve cryptography (ECC)</h4>

<blockquote>
<blockquote>
<p>In addition to RSA (2048-4096 bit), Nitrokey Pro 2 supports elliptic curve
cryptography (ECC. Brainpool and NIST). Because RSA-2048 is not considered <a href="https://www.bsi.bund.de/SharedDocs/Downloads/EN/BSI/Publications/TechGuidelines/TG02102/BSI-TR-02102-1.pdf;jsessionid=064DAA7AD3195C1C87B1C71B2760DB4E.1_cid360?__blob=publicationFile&amp;v=7">safe
for use beyond 2022</a>, ECC is becoming increasingly important as a fast and
secure alternative. <a href="https://www.nitrokey.com/documentation/elliptic-curves-ecc-support-nitrokey-storage-2-and-pro-2">See instructions</a>. This feature requires the new
Nitrokey Pro 2 hardware and cannot be installed by upgrading the firmware.</p>
</blockquote>
</blockquote>

<p>Editors addition: the ECC key length is between 256 and 512 bit. Bernstein&#39;s
Curve 25519 is not supported do to lack of support in the smartcard. The
<a href="https://www.nitrokey.com/news/2017/nitrokey-start-supports-elliptic-curves-ecc">Nitrokey start does support 25519</a>.</p>

<h4>Improved keystore support for Windows</h4>

<blockquote>
<blockquote>
<p>It is now possible to <a href="https://www.nitrokey.com/documentation/elliptic-curves-ecc-support-nitrokey-storage-2-and-pro-2">roll out company certificates via Active
Directory</a> on Windows devices. These certificates can be used for Windows
logon and for e-mail encryption using S/MIME. In addition, OpenPGP and S/MIME
email encryption can be easily used in parallel on a single Nitrokey Pro 2. This
feature requires the new Nitrokey Pro 2 hardware and cannot be installed by
upgrading the firmware.</p>
</blockquote>
</blockquote>

<h4>Integrity verification of Purism laptops</h4>

<blockquote>
<blockquote>
<p>The Nitrokey Pro 2 can be used as a part of the tamper-evident boot
protection which Purism integrates into their Librem Linux laptops. <a href="https://www.nitrokey.com/documentation/elliptic-curves-ecc-support-nitrokey-storage-2-and-pro-2">Read
more</a>.</p>
</blockquote>
</blockquote>

<h4>Hardware differences?</h4>

<p>Reading through the <a href="https://support.nitrokey.com/t/what-is-the-difference-between-prov1-and-pro-v2/1406">forum</a>, the exact hardware change is a new version of
the OpenPGP smartcard (namely, version 3). On the <a href="https://gnupg.org/ftp/specs/">gnupg site</a> you can
download the <a href="https://raymii.org/s/inc/downloads/OpenPGP-smart-card-application-3.3.1.pdf">specification for 3.3</a> as well as the <a href="https://raymii.org/s/inc/downloads/OpenPGP-smart-card-application-2.2.pdf">specification for
2.2</a>. Major difference is support for ECC crypto, as is reflected in the new
nitrokey.</p>

<h4>GnuPG version</h4>

<p>An important note is that you do need a recent version of Gnupg (&gt; 2.1.16). The
version with Ubuntu 16.04 or 16.10 will not work and you manually need to
upgrade it. Either by installing newer packages (not recommended) or by
compiling the newer version of GnuPG yourself. You could also update your entire
distro to at least 18.04.</p>

<p>More information and getting started with ECC can be found <a href="https://www.nitrokey.com/documentation/elliptic-curves-ecc-support-nitrokey-storage-2-and-pro-2">here</a></p>

<h3>Nitrokey Storage 2</h3>

<p>This was the first of the new hardware, available since June as far as I can
see. Since the NitroKey Storage is based on the Nitrokey pro (it is an OpenPGP
card), the above new features (ECC support and Active Directory integration) are
new in the hardware of the Storage 2 as well. (The storage 2 also has an OpenPGP
3 smartcard). The nitrokey storage has an extra SD card which houses the
encrypted storage part, whereas the Smartcard does the encryption of said
storage. You can read <a href="https://raymii.org/s/inc/downloads/nitrokey-storage-Manual.pdf">more in the manual</a> on how the exact storage
encryption works.</p>

<p>The new features exclusive to the Nitrokey Storage are, as you might expect,
related to it&#39;s storage functions. In addition to what I listed above, here are
the new features for the Storage 2:</p>

<h4>Manual initialization of the storage is not necessary</h4>

<blockquote>
<blockquote>
<p>On delivery, the device&#39;s storage is already initialized with random numbers
and an encrypted partition is set up. This eliminates manual setup and Nitrokey
Storage 2 can be used immediately.</p>
</blockquote>
</blockquote>

<h4>Protection of unencrypted storage</h4>

<blockquote>
<blockquote>
<p>The Nitrokey App for Windows, macOS and Linux (AppImage) is now pre-
installed on the unencrypted storage. In addition, the unencrypted storage is
read-only, which can only be changed with the Admin PIN (requires Nitrokey App
1.3.1). This prevents the unintentional distribution of viruses and the
unintentional storage of sensitive data on the unencrypted storage. This
function is particularly interesting for enterprise customers who configure
Nitrokey Storage 2 centrally and whose employees only use the user PIN.</p>
</blockquote>
</blockquote>

<p><a href="https://www.nitrokey.com/news/2018/nitrokey-storage-2-released">Read the full announcement here</a></p>

<h3>Nitrokey Fido U2F</h3>

<p><img src="https://raymii.org/s/inc/img/nitrokey-u2f-2.jpg.png" alt=""></p>

<blockquote>
<p>Early dev version of the Nitrokey U2F</p>
</blockquote>

<p>The Nitrokey Fido U2F is an entirely new key. It&#39;s based on the <a href="https://github.com/conorpp/u2f-zero/">U2F Zero</a>,
It is open hardware and the software is open source as well. It differs
physically from the other nitrokey devices in that it has a touch button.</p>

<p>With the Nitrokey FIDO U2F, after the initial configuration, you just need to
touch the button on the device each time you are logging in to your various
accounts.</p>

<p>Universal Second Factor, or FIDO U2F is a standard for 2 factor auth with USB
dongles. It is developed by Google and Yubico There is <a href="https://www.dongleauth.info/">a site</a> with more
information and a list of supported sites. There is also an <a href="https://web.archive.org/web/20181107115126/https://medium.com/@nparlante/the-unofficial-fido-u2f-faq-9201fa5cb4da">unofficial FAQ
here</a>.</p>

<p><a href="https://raymii.org/s/inc/downloads/Nitrokey_FIDO_U2F_factsheet.pdf">This PDF</a> states that the Nitrokey FIDO U2F supports the FIDO Universal 2nd
Factor (U2F) 1.2 standard. The Nitrokey Fido U2F also supports <a href="https://en.wikipedia.org/wiki/WebAuthn">WebAuthn</a>.
At the moment there is no support for FIDO2.</p>

<p>More information <a href="https://www.nitrokey.com/news/2018/new-nitrokey-fido-u2f">on the site</a></p>

<h4>FIDO U2F, FIDO2 and WebAuthN???</h4>

<p>FIDO U2F and FIDO2 and WebAuthn are not the same. This Nitrokey does not support
FIDO2 at the moment, but I suspect it could be added in a later firmware
version. I&#39;ll try to give a simple explanation of the FIDO&#39;s:</p>

<ul>
<li>FIDO U2F is for second factor only (next to a username/password).</li>
<li>FIDO2 is for both second factor, as well as replacing a username/password completely (with a public/private keypair) </li>
<li>WebAuthn is the Web and browser API for authentication. It supports both FIDO U2F (CTAP1) and FIDO2 (CTAP2). (CTAP == Client to Authenticator Protocol)</li>
</ul>

<p>Websites can utilize the WebAuthn standard together with a protocol like CTAP1
or CTAP2 to provide functionality so that the user can use their USB token to
authenticate.</p>

<p>A more technical explanation of CTAP can <a href="https://web.archive.org/web/20181107114622/https://www.imperialviolet.org/2018/03/27/webauthn.html">be found here</a></p>

<p>I have not used this standard (u2f) before but it seems to be comparable with
the Yubikey process (press a button for 2 factor). It is the cheapest of
Nitrokeys so far (22 euro&#39;s) and works with all major operating systems
(Windows, Linux, OS X and BSD (but which bsd?)) and all major browsers,
including Opera.</p>

<p>There is a lot of documentation <a href="https://github.com/Nitrokey/nitrokey-fido-u2f-firmware/blob/master/doc/security_architecture.md">on the security and key generation</a> here.</p>
Tags: <a href="../tags/fido.html" class="link">fido</a>
, <a href="../tags/fido-u2f.html" class="link">fido-u2f</a>
, <a href="../tags/fido2.html" class="link">fido2</a>
, <a href="../tags/fst-01.html" class="link">fst-01</a>
, <a href="../tags/gnuk.html" class="link">gnuk</a>
, <a href="../tags/gnupg.html" class="link">gnupg</a>
, <a href="../tags/gpg.html" class="link">gpg</a>
, <a href="../tags/hsm.html" class="link">hsm</a>
, <a href="../tags/neug.html" class="link">neug</a>
, <a href="../tags/nitrokey.html" class="link">nitrokey</a>
, <a href="../tags/nitrokey-pro.html" class="link">nitrokey-pro</a>
, <a href="../tags/nitrokey-start.html" class="link">nitrokey-start</a>
, <a href="../tags/password.html" class="link">password</a>
, <a href="../tags/security.html" class="link">security</a>
, <a href="../tags/start.html" class="link">start</a>
, <a href="../tags/stm32f103tb.html" class="link">stm32f103tb</a>
, <a href="../tags/tutorials.html" class="link">tutorials</a>
, <a href="../tags/u2f.html" class="link">u2f</a>
, <a href="../tags/yubikey.html" class="link">yubikey</a>
</div>
<br/>
<footer>
<br/>
                <form role="search" action="https://encrypted.google.com/search"
                style="min-width:250px;max-width:300px;">
                    <div class="form-group">
                      <input type="hidden" name="as_sitesearch" value="raymii.org">
                      <input type="hidden" name="as_qdr" value="all">
                      <input type="text" name="as_q" class="form-control" placeholder="Search">
                    </div>
                  </form>
                <br>
                <p><small>
                <a href="/s/">Home</a> | 
                <a href="/s/static/About.html">About</a> | 
                <a href="/s/tags/all.html">All pages</a> | 
                <a href="/s/software/Sparkling_Network.html">Cluster Status</a> | 
                Generated by <a href="/s/software/ingsoc.html">ingsoc</a>.</small></p>
    
    </footer>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-3704876-6"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-3704876-6');
    </script>
     
    </main>
    </body>
    </html>
    