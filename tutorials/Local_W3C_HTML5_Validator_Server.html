
    <!DOCTYPE html>
    <html lang="en">
        <head>
        <title>Local W3C HTML5 Validator Server - Raymii.org</title>
        <link href="/s/inc/css/marx.css" rel="stylesheet"  />
        <script src="/s//inc/js/instant.js"></script> 
        <script src="/s//inc/js/toc.js"></script> 
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link type="application/opensearchdescription+xml" rel="search" href="/s/inc/opensearch.xml"/>
        <link rel="alternate" type="application/rss+xml" title="RSS Feed for Raymii.org" href="https://raymii.org/s/feed.xml" />
    </head>
    <body>
        
        <a id="top-of-page"></a>
        <main>
        <a class="skip-main" href="#main">Skip to main content</a>
            <header>
                <h1 class="headheader">
                    <a href="https://raymii.org/s/">Raymii.org 
                        <img src="/s/inc/img/resistor-50.png" alt="Logo (IEC resistor symbol)">
                    </a>
                </h1>
                <small>
                  Quis custodiet ipsos custodes?<br>
                  <a href="/s/">Home</a> | 
                  <a href="/s/static/About.html">About</a> | 
                  <a href="/s/tags/all.html">All pages</a> | 
                  <a href="https://raymii.org/s/feed.xml">RSS Feed</a> | 
                  <a href="gopher://raymii.org:70">Gopher</a>
                </small>
            </header>
          
    <h2 class='headheader' id='main'>Local W3C HTML5 Validator Server</h2>
<p><small>Published: 27-12-2013 | Author: Remy van Elst | <a href="Local_W3C_HTML5_Validator_Server.txt">Text only version of this article</a>
</small></p>
<div class='ad'>
                            <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
                            <!-- voorartikel -->
                            <ins class="adsbygoogle"
                                 style="display:inline-block;width:728px;height:90px"
                                 data-ad-client="ca-pub-7993642564731324"
                                 data-ad-slot="6172324376"></ins>
                            <script>
                            (adsbygoogle = window.adsbygoogle || []).push({});
                            </script>
                        </div><br><div id="toc">
<h3>Table of Contents</h3>
</div>
<hr>
<div id="contents">
<p><img src="http://i.imgur.com/jqyin7n.png" alt="w3 validator"> This tutorial shows you how to set up a local instance of the
w3c html validator, including HTML5 validation support via a local instance of
the Validator.nu HTML5 validator. The online w3 validator has strict limits and
will ban you for some time if you validate to often. So if you for example have
a local unit test to check a website you will get banned a lot. Which is
understandable of course, it is a free service. They provide all source code
plus it is in the debian repositories, it is dead simple to set up one yourself.</p>

<p><a href="https://www.digitalocean.com/?refcode=7435ae6b8212">If you like this article, consider sponsoring me by trying out a Digital Ocean
VPS. With this link you&#39;ll get $100 credit for 60 days). (referral link)</a></p>

<p>I&#39;ve used Ubuntu 13.10 because that has the latest w3 test (1.3). If you use
Ubuntu 12.04 LTS and you want the latest version you can install the two
packages (<code>w3c-markup-validator</code> and <code>w3c-sgml-lib</code>) from the raring
repositories (13.04), that works just fine.</p>

<h3>Contents</h3>

<ul>
<li>Installing required packages</li>
<li>Compiling / Installing HTML5 Validator.nu</li>
<li>Configuring the w3c-validator</li>
<li>Upstart script for the HTML5 validator</li>
</ul>

<h3>Installing required packages</h3>

<p>Install all required packages:</p>

<pre><code>apt-get install w3c-markup-validator mercurial subversion python default-jdk
</code></pre>

<p>This will install everything required for the w3 validator and for the HTML 5
one (that is Java). It will also pull down Apache. After the install finished
you can reach your validator already at <code>http://server.ext/w3c-validator</code>.
However, it is not yet configured for HTML5 validation, which is kinda required
for todays web.</p>

<h3>Compiling / Installing the HTML5 Validator.nu</h3>

<p>The W3 validator itself does not do HTML5 validation. It does support using
external services to do it, and we are going to do it with the HTML5 validator
from <a href="http://validator.nu">http://validator.nu</a>.</p>

<p>Create a folder:</p>

<pre><code>mkdir /usr/share/html5-validator 
cd /usr/share/html5-validator
</code></pre>

<p>Set the <code>JAVA_HOME</code> path.</p>

<pre><code>export JAVA_HOME=/usr/lib/jvm/java-6-openjdk
</code></pre>

<p>Clone the latest validator source:</p>

<pre><code>hg clone https://bitbucket.org/validator/build build
</code></pre>

<p>Start the build:</p>

<pre><code>python build/build.py all
</code></pre>

<p>If you encounter a Java exception, run the build script again. I had to do it
three times:</p>

<pre><code>python build/build.py all   
</code></pre>

<p>If it all works after a few tries, the validator runs at <code>localhost:8888</code>:</p>

<pre><code>INFO::Started SocketConnector@0.0.0.0:8888
</code></pre>

<p>Kill it with CTRL+C and continue reading. We first configure the W3 validator
and then create an upstart script for the Validator.nu one.</p>

<h3>Configuring the w3c-validator</h3>

<p>I need to validate hosts in private networks, so I changed the below option in
<code>/etc/w3c/validator.conf</code>:</p>

<pre><code>Allow Private IPs = yes
</code></pre>

<p>Enable the HTML5 validator by uncommenting the following:</p>

<pre><code>&lt;External&gt;
## Enable checking documents via external services.
## The example config below assumes that you have installed the validator.nu
## engine on the same machine as the markup validator.
## See http://about.validator.nu/ for installation instructions.
HTML5 = http://localhost:8888/html5/
#CompoundXML = http://localhost:8888/
&lt;/External&gt;
</code></pre>

<h3>Upstart script for HTML5 validator</h3>

<p>Create the upstart script to start the HTML5 validator at boot:</p>

<pre><code>vim /etc/init/html5-validator.conf
</code></pre>

<p>Contents:</p>

<pre><code>description &quot;Validator.nu HTML5 Validator&quot;

start on (local-filesystems and net-device-up)
stop on runlevel [016]

chdir /usr/share/html5-validator
exec python build/build.py --control-port=8889 run
respawn
</code></pre>

<p>Save and start it:</p>

<pre><code>start html5-validator
</code></pre>

<p>Afterwards you can access your validator via <code>http://server/w3c-validator</code>. It
supports the HTML5 validator from there, but you can also access it directly at
<code>http://server:8888</code>.</p>

<h3>Security note</h3>

<p>The validator.nu service is running as root and there are no limits on both
validators. Make sure you only run it on a trusted network, or properly secure
it.</p>
Tags: <a href="../tags/html.html">html</a>
, <a href="../tags/html5.html">html5</a>
, <a href="../tags/tests.html">tests</a>
, <a href="../tags/tutorials.html">tutorials</a>
, <a href="../tags/validation.html">validation</a>
, <a href="../tags/validator.html">validator</a>
, <a href="../tags/w3.html">w3</a>
, <a href="../tags/w3c.html">w3c</a>
</div>
<br/>
<footer>
<br/>
                <form role="search" action="https://encrypted.google.com/search"
                style="min-width:250px;max-width:300px;">
                    <div class="form-group">
                      <input type="hidden" name="as_sitesearch" value="raymii.org">
                      <input type="hidden" name="as_qdr" value="all">
                      <input type="text" name="as_q" class="form-control" placeholder="Search">
                    </div>
                  </form>
                <br>
                <p><small>
                <a href="/s/">Home</a> | 
                <a href="/s/static/About.html">About</a> | 
                <a href="/s/tags/all.html">All pages</a> | 
                <a href="/s/software/Sparkling_Network.html">Cluster Status</a> | 
                Generated by <a href="/s/software/ingsoc.html">ingsoc</a>.</small></p>
    
    </footer>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-3704876-6"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-3704876-6');
    </script>
     
    </main>
    </body>
    </html>
    