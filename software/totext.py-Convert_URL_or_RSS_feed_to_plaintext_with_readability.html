
    <!DOCTYPE html>
    <html lang="en">
        <head>
        <title>totext.py - Convert URL or RSS feed to text with readability - Raymii.org</title>
        <!-- <link href="/s/inc/css/custom-first.css" rel="stylesheet" />-->
        <link href="/s/inc/css/marx.css" rel="stylesheet"  />
        <!-- <link href="/s/inc/css/custom.css" rel="stylesheet" title="custom" />-->
        <script src="/s//inc/js/instant.js" type="text/javascript"></script> 
        <script src="/s//inc/js/toc.js" type="text/javascript"></script> 
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link type="application/opensearchdescription+xml" rel="search" href="/s/inc/opensearch.xml"/>
        <link rel="alternate" type="application/rss+xml" title="RSS Feed for Raymii.org" href="https://raymii.org/s/feed.xml" />
    </head>
    <body>
        
        <a id="top-of-page"></a>
        <main>
        <a class="skip-main" href="#main">Skip to main content</a>
            <header>
                <h1 class="headheader">
                    <a href="https://raymii.org/s/">Raymii.org <img src="/s/inc/img/resistor-50.png"></a>
                </h1>
                <small>
                  Quis custodiet ipsos custodes?<br>
                  <a href="/s/">Home</a> | 
                  <a href="/s/static/About.html">About</a> | 
                  <a href="/s/tags/all.html">All pages</a> | 
                  <a href="https://raymii.org/s/feed.xml">RSS Feed</a> | 
                  <a href="gopher://raymii.org:70">Gopher</a>
                </small>
            </header>
          

    <h2 class='headheader' id='main'>totext.py - Convert URL or RSS feed to text with readability</h2><p><small>Published: 18-04-2019 | Author: Remy van Elst | <a href="totext.py-Convert_URL_or_RSS_feed_to_plaintext_with_readability.txt" class="link">Text only version of this article</small></a></p><div class='ad'>
                            <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
                            <!-- voorartikel -->
                            <ins class="adsbygoogle"
                                 style="display:inline-block;width:728px;height:90px"
                                 data-ad-client="ca-pub-7993642564731324"
                                 data-ad-slot="6172324376"></ins>
                            <script>
                            (adsbygoogle = window.adsbygoogle || []).push({});
                            </script>
                        </div><br><div id="toc"><h3>Table of Contents</h3></div><hr><div id="contents"><p>Love plaintext? This script downloads an URL, parses it with readability and
returns the plaintext (as markdown). It supports RSS feeds (will convert every
article in the feed) and saves every article.</p>

<p>My usecase is twofold. One is to convert RSS feeds to a <a href="https://raymii.org/s/blog/Site_updates_raymii.org_now_on_gopher.html">Gopher site</a>, the
second is to get full text in my RSS reader.</p>

<p>The script contains a few workarounds for so-called cookiewalls. It also pauses
between RSS feed articles to not do excessive requests.</p>

<p>The readability part is handled by Python, no external services are used.</p>

<p><a href="https://www.digitalocean.com/?refcode=7435ae6b8212">If you like this article, consider sponsoring me by trying out a Digital Ocean
VPS. With this link you&#39;ll get $100 credit for 60 days). (referral link)</a></p>

<p>Here&#39;s an example of a news article. On the left, the text-only parsed version,
on the right, the webpage:</p>

<p><img src="https://raymii.org/s/inc/img/txtnws.png" alt=""></p>

<p><a href="https://github.com/RaymiiOrg/to-text.py">Github repo with source code</a></p>

<h2>Installation</h2>

<p>First install the required libraries.</p>

<p>On Ubuntu:</p>

<pre><code>apt-get install python python-pip #python2
pip install html2text requests readability-lxml feedparser
</code></pre>

<p>Other distro&#39;s, use the <code>pip</code> command above.</p>

<p>Clone the repository:</p>

<pre><code>git clone https://github.com/RaymiiOrg/to-text.py
</code></pre>

<h2>Usage</h2>

<pre><code>usage: totext.py [-h] -u URL [-s SLEEP] [-r] [-n]

Convert HTML page to text using readability and html2text.

arguments:
  -h, --help            show this help message and exit
  -u URL, --url URL     URL to convert (Required)
  -s SLEEP, --sleep SLEEP
                        Sleep X seconds between URLs (only in rss)
  -r, --rss             URL is RSS feed. Parse every item in feed
  -n, --noprint         Dont print converted contents
</code></pre>

<p>If you want to run the script via a cronjob, use the <code>-n</code> option to not have
output.</p>

<p>If the parsing failed, the article will contain the text: <code>parsing failed</code>.</p>

<h2>Examples</h2>

<pre><code>python totext.py --rss --url https://raymii.org/s/feed.xml
python totext.py --url https://www.rd.nl/vandaag/binnenland/grootste-stijging-verkeersdoden-in-jaren-1.1562067
</code></pre>

<h2>Saved text</h2>

<p>Every file converted will also be saved to the folder <code>saved/$hostname</code>. The
filenames are sorted by date.</p>

<h2>License</h2>

<p>GNU GPLv2.</p>
Tags: <a href="../tags/bash.html" class="link">bash</a>, <a href="../tags/gopher.html" class="link">gopher</a>, <a href="../tags/logs.html" class="link">logs</a>, <a href="../tags/monitoring.html" class="link">monitoring</a>, <a href="../tags/pygopherd.html" class="link">pygopherd</a>, <a href="../tags/python.html" class="link">python</a>, <a href="../tags/software.html" class="link">software</a></div><br/><footer><br/>
                <form role="search" action="https://encrypted.google.com/search"
                style="min-width:250px;max-width:300px;">
                    <div class="form-group">
                      <input type="hidden" name="as_sitesearch" value="raymii.org">
                      <input type="hidden" name="as_qdr" value="all">
                      <input type="text" name="as_q" class="form-control" placeholder="Search">
                    </div>
                  </form>
                <br>
                <p>
                <a href="/s/">Home</a> | 
                <a href="/s/static/About.html">About</a> | 
                <a href="/s/tags/all.html">All pages</a> | 
                <a href="/s/software/Sparkling_Network.html">Cluster Status</a> | 
                Generated by <a href="/s/software/ingsoc.html">ingsoc</a> | 
            
    </footer>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-3704876-6"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-3704876-6');
    </script>
     
    </body>
    </html>
    