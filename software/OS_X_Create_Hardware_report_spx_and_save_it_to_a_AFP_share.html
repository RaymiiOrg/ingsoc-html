
    <!DOCTYPE html>
    <html lang="en">
        <head>
        <title>OS X - Create Hardware report SPX and save it to a AFP share - Raymii.org</title>
        <link href="/s/inc/css/marx.css" rel="stylesheet"  />
        <script src="/s//inc/js/instant.js"></script> 
        <script src="/s//inc/js/toc.js"></script> 
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link type="application/opensearchdescription+xml" rel="search" href="/s/inc/opensearch.xml"/>
        <link rel="alternate" type="application/rss+xml" title="RSS Feed for Raymii.org" href="https://raymii.org/s/feed.xml" />
    </head>
    <body>
        
        <a id="top-of-page"></a>
        <main>
        <a class="skip-main" href="#main">Skip to main content</a>
            <header>
                <h1 class="headheader">
                    <a href="https://raymii.org/s/">Raymii.org 
                        <img src="/s/inc/img/resistor-50.png" alt="Logo (IEC resistor symbol)">
                    </a>
                </h1>
                <small>
                  Quis custodiet ipsos custodes?<br>
                  <a href="/s/">Home</a> | 
                  <a href="/s/static/About.html">About</a> | 
                  <a href="/s/tags/all.html">All pages</a> | 
                  <a href="https://raymii.org/s/feed.xml">RSS Feed</a> | 
                  <a href="gopher://raymii.org:70">Gopher</a>
                </small>
            </header>
          
    <h2 class='headheader' id='main'>OS X - Create Hardware report SPX and save it to a AFP share</h2>
<p><small>Published: 02-06-2013 | Author: Remy van Elst | <a href="OS_X_Create_Hardware_report_spx_and_save_it_to_a_AFP_share.txt">Text only version of this article</a>
</small></p>
<div class='ad'>
                            <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
                            <!-- voorartikel -->
                            <ins class="adsbygoogle"
                                 style="display:inline-block;width:728px;height:90px"
                                 data-ad-client="ca-pub-7993642564731324"
                                 data-ad-slot="6172324376"></ins>
                            <script>
                            (adsbygoogle = window.adsbygoogle || []).push({});
                            </script>
                        </div><br><div id="toc">
<h3>Table of Contents</h3>
</div>
<hr>
<div id="contents">
<p>This script creates a OS X hardware report (an SPX file) and saves it to a AFP
share. This is usefull when you are rolling out new machines. Run this script
via Apple Remote Desktop and you have all your administration in your AFP share,
which you can later put in your CMDB. The report has all the hardware data, from
firmware, serial number, model, MAC addresses, disk and memory information, in
short everything you need for your CMDB and support contracts.</p>

<p><a href="https://www.digitalocean.com/?refcode=7435ae6b8212">If you like this article, consider sponsoring me by trying out a Digital Ocean
VPS. With this link you&#39;ll get $100 credit for 60 days). (referral link)</a></p>

<p>This is the script:</p>

<pre><code>#!/bin/bash
mkdir /Volumes/hardware-report/;
mount -t afp afp://AFPUSER:AFPPASSWORD@10.2.38.1/Hardware /Volumes/hardware-report;
mkdir -p &quot;/Volumes/hardware-report/`hostname -s`&quot;;
system_profiler -detailLevel full -xml &gt; &quot;/Volumes/hardware-report/`hostname -s`/Report-for-`hostname -s`.spx&quot;;
umount /Volumes/hardware-report;
unlink $0
</code></pre>

<p>Change the username, password, share IP/Hostname and share path. Then copy it to
all the machines via Apple Remote Desktop, in the <code>/tmp</code> folder. Now via ARD
execute it as root. You should see new folder appear in the AFP share based on
the machine hostname. In there you find the .SPX files which you can use for
your administration.</p>

<p>Note that the last line, <code>unlink $0</code> removes the script after it ran. So the
username and password don&#39;t stay on the machine.</p>
Tags: <a href="../tags/afp.html">afp</a>
, <a href="../tags/apple.html">apple</a>
, <a href="../tags/apple-remote-desktop.html">apple-remote-desktop</a>
, <a href="../tags/ard.html">ard</a>
, <a href="../tags/cmdb.html">cmdb</a>
, <a href="../tags/hardware-report.html">hardware-report</a>
, <a href="../tags/mac.html">mac</a>
, <a href="../tags/os-x.html">os-x</a>
, <a href="../tags/sleep.html">sleep</a>
, <a href="../tags/software.html">software</a>
</div>
<br/>
<footer>
<br/>
                <form role="search" action="https://encrypted.google.com/search"
                style="min-width:250px;max-width:300px;">
                    <div class="form-group">
                      <input type="hidden" name="as_sitesearch" value="raymii.org">
                      <input type="hidden" name="as_qdr" value="all">
                      <input type="text" name="as_q" class="form-control" placeholder="Search">
                    </div>
                  </form>
                <br>
                <p><small>
                <a href="/s/">Home</a> | 
                <a href="/s/static/About.html">About</a> | 
                <a href="/s/tags/all.html">All pages</a> | 
                <a href="/s/software/Sparkling_Network.html">Cluster Status</a> | 
                Generated by <a href="/s/software/ingsoc.html">ingsoc</a>.</small></p>
    
    </footer>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-3704876-6"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-3704876-6');
    </script>
     
    </main>
    </body>
    </html>
    